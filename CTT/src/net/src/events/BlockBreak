package net.CTT.src.events;

import net.CTT.src.Main;
import net.CTT.src.ScoreBoardHandler;

import org.bukkit.GameMode;
import org.bukkit.Location;
import org.bukkit.Material;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.block.BlockBreakEvent;

public class BlockBreak implements Listener 
{
	@EventHandler
	public void onBlockBreak(BlockBreakEvent e)
	{
		if(e.getPlayer().getGameMode() != GameMode.CREATIVE && e.getBlock().getType() == Material.WOOL)
		{
			if(e.getBlock().getType() == Material.WOOL)
			{
				Main.brokenBlocks.put(e.getPlayer().getName(), 1);
				Location pL = e.getBlock().getLocation();
				if(pL.getBlockX() == Main.monument[0].getBlockX() && pL.getBlockZ() == Main.monument[0].getBlockZ() && pL.getBlockY() >= Main.monument[0].getBlockY())
					Main.woolBlocks[0]--;
				else if(pL.getBlockX() == Main.monument[1].getBlockX() && pL.getBlockZ() == Main.monument[1].getBlockZ() && pL.getBlockY() >= Main.monument[1].getBlockY())
					Main.woolBlocks[1]--;
				
				ScoreBoardHandler.updateBoard();
			}
			else
			{
				e.getPlayer().sendMessage("Â§CBreak wool and place it on your tower");
				e.setCancelled(true);
			}
		}
		else if(e.getPlayer().getGameMode() == GameMode.CREATIVE)
		{
			
		}
		else
		{
			e.getPlayer().sendMessage("Break Wool and Only Wool!!");
			e.setCancelled(true);
		}
		
	}
}
